(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){e.exports=n(1164)},1162:function(e,t,n){},1164:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),i=n(23),c=n.n(i),s=n(17),l=n(18),h=n(16),d=n(19),u=n(21),m=n(101),f=n.n(m),p=n(25),b=n(4),g=n.n(b),v=(a="cr",{create:function(e){var t=e;return"string"===typeof a&&(t="".concat(a,"-").concat(e)),{b:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return g()(t,n)},e:function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return g()("".concat(t,"__").concat(e),a)},m:function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return g()("".concat(t,"--").concat(e),a)}}}}),y=n(10),w=v.create("header"),C=function(e){function t(e){return Object(s.a)(this,t),Object(h.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(y.g,{light:!0,expand:!0,style:{backgroundColor:"black",color:"white",height:"70px"}},r.a.createElement(y.d,{navbar:!0},r.a.createElement("a",{href:"http://saquibalam.com",style:{fontSize:"1.4em",textDecoration:"none",color:"white"}},r.a.createElement("b",null,"Created by Saquib"))),r.a.createElement(y.d,{navbar:!0,className:w.e("nav-right")},r.a.createElement("a",{href:"http://saquibalam.com",style:{marginRight:"30px"}},"Profile")))}}]),t}(r.a.Component),k=n(26),E=n(42),O=(n(1091),{background:"black"}),j=[{to:"/",name:"dashboard",exact:!0,Icon:E.MdDashboard,role:"user"},{to:"/",name:"dashboard",exact:!0,Icon:E.MdDashboard,role:"admin"},{to:"/admin/users",name:"Admin/User",exact:!0,Icon:E.MdDashboard,role:"admin"}],x=v.create("sidebar"),N=(r.a.Component,n(30)),S=v.create("content"),I=function(e){var t=e.tag,n=e.className,a=Object(N.a)(e,["tag","className"]),o=S.b(n);return r.a.createElement(t,Object.assign({className:o},a))};I.defaultProps={tag:y.c};var P=I,D=function(){return""},A=n(11),T=n(108),M=n(109),z=n.n(M),R=n(57),q=n.n(R),_=q.a.initializeApp({apiKey:"AIzaSyAXOpZOiCozHSC6Hj23LRfsAjqo8fNMIO0",authDomain:"compute-160011.firebaseapp.com",databaseURL:"https://compute-160011.firebaseio.com",projectId:"compute-160011",storageBucket:"compute-160011.appspot.com",messagingSenderId:"804087036155"}),F=(z.a.createClass(_.database()),new q.a.auth.GoogleAuthProvider,n(99),n(100),n(110)),J=n(2),L=n.n(J),W=(Object(F.a)({},L.a,{ID:L.a.oneOfType([L.a.string,L.a.number]).isRequired,component:L.a.oneOfType([L.a.string,L.a.func]),date:L.a.oneOfType([L.a.instanceOf(Date),L.a.string])}),{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"}),B=function(e){var t,n=e.tag,a=e.className,o=e.type,i=Object(N.a)(e,["tag","className","type"]),c=g()(Object(k.a)({},o,!!o),a);return t=n||(!n&&W[o]?W[o]:"p"),r.a.createElement(t,Object.assign({},i,{className:c}))};B.defaultProps={type:"p"};var H=B,U=v.create("page"),K=function(e){var t=e.title,n=e.breadcrumbs,a=e.tag,o=e.className,i=e.children,c=Object(N.a)(e,["title","breadcrumbs","tag","className","children"]),s=U.b("px-3",o);return r.a.createElement(a,Object.assign({className:s},c),r.a.createElement("div",{className:U.e("header")},t&&"string"===typeof t?r.a.createElement(H,{type:"h1",className:U.e("title")},t):t,n&&r.a.createElement(y.a,{className:U.e("breadcrumb")},r.a.createElement(y.b,null,"Home"),n.length&&n.map(function(e,t){var n=e.name,a=e.active;return r.a.createElement(y.b,{key:t,active:a},n)}))),i)};K.defaultProps={tag:"div",title:""};var G=K,X=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).start=function(){n.frameId||(n.frameId=requestAnimationFrame(n.animate))},n.stop=function(){cancelAnimationFrame(n.frameId)},n.animate=function(){n.renderScene(),n.frameId=window.requestAnimationFrame(n.animate)},n.renderScene=function(){n.renderer.render(n.scene,n.camera)};var a=n.props.match.params;if(n.state={loading:!1,code:null},!a.code){var o=(Math.ceil(8999*Math.random())+1e3).toString();return n.props.history.push("/"+o),window.location.reload(),Object(h.a)(n,0)}return n.state.code=a.code,_.database().ref().child("three/"+n.state.code+"/answer").on("value",function(e){(e=e.val())&&(console.log("connecting answer"),n.answer_success(e))}),n.initConnection(),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"initConnection",value:function(){var e=this;this.localConnection=new RTCPeerConnection({iceServers:[{url:"stun:23.21.150.121"}]},{optional:[{DtlsSrtpKeyAgreement:!0}]}),this.sendChannel=this.localConnection.createDataChannel("sendChannel"),this.sendChannel.onopen=function(e){console.log("channel open")},this.sendChannel.onclose=function(e){console.log("channel close")},this.sendChannel.onmessage=this.onmessage.bind(this),document.ch=this.sendChannel,this.localConnection.onicecandidate=function(t){_.database().ref().child("three/"+e.state.code).set({offer:JSON.stringify(e.localConnection.localDescription)}).then(function(e){})},this.create_offer()}},{key:"create_offer",value:function(){var e=this;this.localConnection.createOffer().then(function(t){e.offer=t,e.localConnection.setLocalDescription(t)}).catch(function(e){console.log("offer error")})}},{key:"answer_success",value:function(e){var t=this,n=new RTCSessionDescription(JSON.parse(e||"{}"));this.localConnection.setRemoteDescription(n).catch(function(e){console.log("answer error",e),t.initConnection()})}},{key:"onmessage",value:function(e){var t=JSON.parse(e.data),n=t.pitch,a=t.roll,o=t.yaw;this.cube.rotation.x=n*Math.PI/180,this.cube.rotation.y=a*Math.PI/180,this.cube.rotation.z=o*Math.PI/180}},{key:"componentDidMount",value:function(){if(this.mount){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.scene=new A.g,this.camera=new A.e(75,e/t,.1,1e3),this.camera.position.z=4,this.renderer=new A.h({antialias:!0}),this.renderer.setClearColor("#ffffff"),this.renderer.setSize(e,t),this.mount.appendChild(this.renderer.domElement);var n=new A.b(1,1,1),a=new A.d({color:"#433F81"});this.cube=new A.c(n,a),this.scene.add(this.cube);var o=new A.a(16777215);this.scene.add(o);var r=new A.f(16777215,1,0,1);r.position.set(0,0,2),this.scene.add(r),this.start()}}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.code;return n||!a?r.a.createElement(G,{className:"LoadPage"},r.a.createElement("div",{style:{width:"100%",height:"100%",left:0,top:0,position:"fixed",background:"white"}},r.a.createElement("img",{style:{margin:"auto",marginTop:"30vh",display:"block"},src:"loader.gif"}))):r.a.createElement(G,{className:"ThreePage",style:{width:"100%",zIndex:10,marginTop:"100px"}},r.a.createElement(T,{value:a}),r.a.createElement("div",{id:"mount",style:{width:"100%",height:"400px"},ref:function(t){e.mount=t}}))}}]),t}(r.a.Component),Z=n(24),Q=n(111),V=n.n(Q),Y=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).start=function(){n.frameId||(n.frameId=requestAnimationFrame(n.animate))},n.stop=function(){cancelAnimationFrame(n.frameId)},n.animate=function(){n.renderScene(),n.frameId=window.requestAnimationFrame(n.animate)},n.renderScene=function(){n.renderer.render(n.scene,n.camera)},n.handleScan=function(e){e&&(n.props.history.push("/control/"+e),window.location.reload())},n.handleError=function(e){console.error(e)},n.state={loading:!1,code:null};var a=n.props.match.params;a.code&&(n.state.code=a.code),window.addEventListener("deviceorientation",n.handleOrientation.bind(Object(Z.a)(Object(Z.a)(n))));var o={iceServers:[{url:"stun:23.21.150.121"}]},r={optional:[{DtlsSrtpKeyAgreement:!0}]};return n.remoteConnection=new RTCPeerConnection(o,r),n.remoteConnection.ondatachannel=n.receiveChannelCallback.bind(Object(Z.a)(Object(Z.a)(n))),_.database().ref().child("three/"+n.state.code+"/offer").on("value",function(e){(e=e.val())&&(n.remoteConnection=new RTCPeerConnection(o,r),n.remoteConnection.ondatachannel=n.receiveChannelCallback.bind(Object(Z.a)(Object(Z.a)(n))),console.log("Acceting offer"),n.accept_offer(e))}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"receiveChannelCallback",value:function(e){console.log("receiveChannel set"),this.receiveChannel=e.channel,document.ch=e.channel,this.receiveChannel.onmessage=function(e){console.log(e.data)},this.receiveChannel.onopen=function(e){console.log("open")},this.receiveChannel.onclose=function(e){console.log("close")},this.messenger=this.receiveChannel}},{key:"accept_offer",value:function(e){var t=this,n=new RTCSessionDescription(JSON.parse(e||"{}"));this.remoteConnection.setRemoteDescription(n).then(function(){return t.remoteConnection.createAnswer()}).then(function(e){var n=e;t.remoteConnection.setLocalDescription(n),_.database().ref().child("three/"+t.state.code).update({answer:JSON.stringify(n)}).then(function(e){console.log("answer created")})}).catch(function(e){console.log("erroe accepting offer")})}},{key:"smooth",value:function(e){return(e+360)%360}},{key:"handleOrientation",value:function(e){if(this.state.code){var t=this.smooth(e.beta),n=this.smooth(e.gamma),a=this.smooth(e.alpha);this.cube.rotation.x=t*Math.PI/180,this.cube.rotation.y=n*Math.PI/180,this.cube.rotation.z=a*Math.PI/180,this.messenger&&this.messenger.send(JSON.stringify({pitch:t,roll:n,yaw:a}))}}},{key:"componentDidMount",value:function(){this.mount&&this.initThree()}},{key:"initThree",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.scene=new A.g,this.camera=new A.e(75,e/t,.1,1e3),this.camera.position.z=4,this.renderer=new A.h({antialias:!0}),this.renderer.setClearColor("#ffffff"),this.renderer.setSize(e,t),this.mount.appendChild(this.renderer.domElement);var n=new A.b(1,1,1),a=new A.d({color:"#433F81"});this.cube=new A.c(n,a),this.scene.add(this.cube);var o=new A.a(16777215);this.scene.add(o);var r=new A.f(16777215,1,0,1);r.position.set(0,0,2),this.scene.add(r),this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.code;return n?r.a.createElement(G,{className:"LoadPage"},r.a.createElement("div",{style:{width:"100%",height:"100%",left:0,top:0,position:"fixed",background:"white"}},r.a.createElement("img",{style:{margin:"auto",marginTop:"30vh",display:"block"},src:"loader.gif"}))):a?r.a.createElement(G,{className:"ControllerPage",style:{width:"100%",zIndex:10,marginTop:"100px"}},r.a.createElement("p",null,this.state.code),r.a.createElement("div",{id:"mount",style:{width:"100%",height:"400px"},ref:function(t){e.mount=t}})):r.a.createElement(G,{className:"ControllerPage",style:{width:"100%",zIndex:10,marginTop:"100px"}},r.a.createElement(V.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}}))}}]),t}(r.a.Component),$=(n(1162),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={loading:!1,redirect:!1,redirect_to:""},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.breakpoint;t!==this.props.breakpoint&&this.checkBreakpoint(t)}},{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){if(this.checkBreakpoint(this.props.breakpoint),this.state.redirect)return console.log("Redirect to",this.state.redirect_to),0}},{key:"checkBreakpoint",value:function(e){e}},{key:"render",value:function(){this.state.user;if(this.state.loading)return r.a.createElement(G,{className:"LoadPage"},r.a.createElement("div",{style:{width:"100%",height:"100%",left:0,top:0,position:"fixed",background:"white"}},r.a.createElement("img",{style:{margin:"auto",marginTop:"30vh",display:"block"},src:"/loader.gif"})));var e=r.a.createElement(p.d,null,r.a.createElement(p.c,{exact:!0,path:"/control",render:function(e){return r.a.createElement(Y,e)}}),r.a.createElement(p.c,{exact:!0,path:"/control/:code",render:function(e){return r.a.createElement(Y,e)}}),r.a.createElement(p.c,{exact:!0,path:"/",render:function(e){return r.a.createElement(X,e)}}),r.a.createElement(p.c,{exact:!0,path:"/:code",render:function(e){return r.a.createElement(X,e)}})),t=r.a.createElement(C,null);return r.a.createElement(p.a,null,r.a.createElement("main",{className:"cr-app bg-light"},r.a.createElement(P,{fluid:!0},t,e,r.a.createElement(D,null))))}}]),t}(r.a.Component)),ee=f()(function(e){var t=e.width;return t<575?{breakpoint:"xs"}:576<t&&t<767?{breakpoint:"sm"}:768<t&&t<991?{breakpoint:"md"}:992<t&&t<1199?{breakpoint:"lg"}:t>1200?{breakpoint:"xl"}:{breakpoint:"xs"}})($);c.a.render(r.a.createElement(ee,null),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.429bdf50.chunk.js.map